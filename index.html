<!DOCTYPE html>
<html>
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojo/dojo.xd.js"> </script>
    <script src="http://166.84.136.68:8888/battle/static/underscore/underscore.js"> </script>
    
    <script type="text/javascript" src="res/js/kinetic-v3.10.0.min.js"> </script>
    <script type="text/javascript" src="res/js/btjs.js"> </script>
	<script type="text/javascript" src="res/js/config.js"> </script>
	<script type="text/javascript" src="res/js/field.js"> </script>
	<script type="text/javascript" src="res/js/ui.js"> </script>
    <script type="text/javascript" src="res/js/defs.js"> </script>
    <script type="text/javascript" src="res/js/services.js"> </script>
    
	
	
	<link href="res/fonts/sansation.css" rel="stylesheet" type="text/css" />
	<link href="res/css/ui.css" rel="stylesheet" type="text/css" />
	
    <style type="text/css">
		body{
			 background-color: #000; 
			 margin: 0px;	
			 color: white;
			 font: 13px/19px 'SansationRegular', Arial, sans-serif;
		}
		
		input{
			border: 0px solid black;	
			outline: none;
		}

        .shell{
            margin: 0 auto;
            /*width: 768px;
            height: 768px;*/
        }
        
        #field{
            /*width:768px;
            height:768px;*/
            /*transform: rotateX(45deg);
            -webkit-transform: rotateX(45deg); /* Safari and Chrome */
           /*-moz-transform: rotateX(45deg); /* Firefox */  
        }
    </style>
    <script type="text/javascript">
    	function $ (selector, el) {  
		     if (!el) {el = document;}  
		     return el.querySelector(selector);  
		}
		function $$ (selector, el) {  
	    	if (!el) {el = document;}  
	    	return el.querySelectorAll(selector);
    	}
        Element.prototype.$ = function (selector) {
            return this.querySelector(selector);  
        };
        Element.prototype.$$ = function (selector) {
            return this.querySelectorAll(selector);  
        };
        
        function init(){
        	Field.init();
        	resizeCanvas();
        }
        
        function resizeCanvas(){
        	var newWidth = window.innerWidth;
			var newHeight = window.innerHeight - 5;
		
        	$("#input").width = newWidth;
        	$("#input").height = newHeight;
        	
        	$("#input").style.width = newWidth;
        	$("#input").style.height = newHeight;
		
        	$("#stats").width = newWidth;
        	$("#stats").height = newHeight;
        	
        	$("#stats").style.width = newWidth;
        	$("#stats").style.height = newHeight;
		
        	$("#ui").width = newWidth;
        	$("#ui").height = newHeight;
        	
        	$("#ui").style.width = newWidth;
        	$("#ui").style.height = newHeight;
		
        	
        	$(".shell").style.width = newWidth;
        	$(".shell").style.height = newHeight;
        	
        	Field.setSize(newWidth, newHeight);
        }
		window.addEventListener('resize', resizeCanvas, false);
		window.addEventListener('orientationchange', resizeCanvas, false);
		
		
		var leftMouseIsDown = false;
		var rightMouseIsDown = false;
		var startDrag;
		function onMouseDown(e){
			if(e.button == 0) leftMouseIsDown = true;
			if(e.button == 2) rightMouseIsDown = true;
			startDrag = [e.offsetX, e.offsetY];
		}
		function onMouseUp(e){
			if(e.button == 0) leftMouseIsDown = false;
			if(e.button == 2) rightMouseIsDown = false;
		}
		function onMouseMove(e){
			if(rightMouseIsDown){			
				Field.rotation = (startDrag.x - e.offsetX)/150;
				Field.rotation = (Math.round(Field.rotation * 100) % ((Math.PI * 2) * 100)) / 100;
				
				Field.tilt = (startDrag.y - e.offsetY)/150;
				Field.tilt = (Math.round(Field.tilt * 100) % ((Math.PI * 2) * 100)) / 100;
				Field.stage.draw();
			}
		}
		
		window.addEventListener('mousedown', onMouseDown, false);
		window.addEventListener('mouseup', onMouseUp, false);
		window.addEventListener('mousemove', onMouseMove, false);
        
        window.onload = init;
        
        var customEvent = { //May not need it
        	offsetX: 613,
        	offsetY: 444
		}        
        //#363636
    </script>
    <body>
        <div class="shell">
        	
        	<canvas id='stats' width="768" height="768" oncontextmenu="return false" style="position: absolute;"> </canvas>
        	<canvas id='ui' width="768" height="768" oncontextmenu="return false" style="position: absolute;"> </canvas>
        	<canvas id='input' width="768" height="768" oncontextmenu="return false" style="position: absolute;"> </canvas>
        	
        	<div id='field' width="768" height="768" oncontextmenu="return false" style="background-color: #1C1C1C; position: absolute;"> </div>
        	
        	<div id="dialog" oncontextmenu="return false" style="position: absolute; margin: 0; width: 100%">
    			<div class="modal" id="modalLogin">
					<div class="modalHeader">Log in to Binary Tactics</div><br />
	        		<strong>Username</strong><br />
	        		<input id="username" type="text" style="width: 100%" value="atkr"/><br /><br />
	        		<strong>Password</strong><br />
	        		<input id="password" type="password" style="width: 100%" value="atkr" /><br /><br />
	        		<div style="width: 100%;" align="right"><button onclick="authenticate()">Log in</button></div>
	        	</div>
        	</div>
        </div>
    </body>
</html>